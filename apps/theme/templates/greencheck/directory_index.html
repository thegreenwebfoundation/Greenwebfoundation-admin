{% extends 'base_directory.html' %}
{% load humanize %}
{% load static %}
{% load widget_tweaks %}
{% load tailwind_filters %}
{% block content %}
    <div class="full-width bg-neutral-900 relative -top-6 md:-top-8">
        <section class="container mx-auto text-white px-2 sm:px-4 p-12">
            
            <h1 class="text-5xl md:text-disp-sm md:mt-6 pb-4">I'm looking for</h1>
            <form method="get"
                class="form__directory mt-4 grid grid-cols-1 lg:grid-cols-4 grid-rows-3 lg:grid-rows-1 gap-6">
                {{ filter.form.as_p }}
                <input type="submit" class="btn p-4 mt-4 mb-4 lg:col-span-4 lg:justify-self-end lg:w-1/4" value="Find" />
            </form>

			<details class="prose mt-6 md:mt-8 lg:mt-0">
				<summary class="uppercase text-green">What is this?</summary>
				<p class="text-white mt-2">
					The Green Web Directory is a searchable list which enables people to 
					quickly find verified green hosting companies. These are organisations that offer 
					<a class="text-white" href="https://www.thegreenwebfoundation.org/directory/services-offered/" target="_blank" rel="noopener noreferrer">
						hosting services</a>
					and can demonstrate they are taking steps to avoid, reduce or offset 
					the greenhouse gas emissions caused by using electricity to provide their 
					services. They share evidence with us, Green Web Foundation, 
					to show they're doing this on a yearly basis, or better. Verification is free. 
					<a class="text-white" href="https://www.thegreenwebfoundation.org/green-web-datasets/get-verified/" target="_blank" rel="noopener noreferrer">
						How to get verified</a>.
				</p>
			</details>
        </section>
    </div>

    <section class="main-content container mx-auto">
        {% if not ordered_results %}
            {% include "greencheck/partials/_no_directory_results.html" %}
        {% else %}
            {% include "greencheck/partials/_directory_results.html" %}
        {% endif %}
        {% regroup ordered_results by country.name as country_list %}
        {% for country in country_list %}
            <article class="md:grid md:grid-cols-5 lg:grid-cols-7 md:grid-rows-1 pt-4 pb-8 md:pt-8 md:pb-14">
                <h2 class="text-2xl mb-2 mt-0">{{ country.grouper }}</h2>
                <div class="col-span-3 lg:col-span-5">
                    {% for obj in country.list %}
                        <div class="border-b-2 border-neutral-200 mb-4">
                            <h4 class="mb-4 font-bold text-xl" id="{{ obj.id }}">{{ obj.name }}</h4>
                            
							<p class="text-neutral-700 mb-8 max-w-prose">
                                {% if obj.description %}
                                    {{ obj.description }}
                                {% else %}
                                    <small>If we had a description it would go here. So we need some graceful fallback copy to replace this.</small>
                                {% endif %}

                                <ul class="mb-4">
                                    {% if obj.services.names %}
                                        {% for service in obj.services.all %}<li class="service-label inline-block">{{ service.name }}</li>{% endfor %}
                                        {% comment %}
										Every host in our directory used to at least offer shared hosting.
										Below is a placeholder to see how it would look with live data.
									{% else %}
										<li class="service-label inline-block">Compute: Shared Hosting for Websites</li>
                                        {% endcomment %}
                                    {% endif %}
                                </ul>

                            </p>
                            {% if obj.public_supporting_evidence %}
                                <details class="mb-4">
                                    <summary>
                                        <span class="">Published supporting evidence</span>
                                    </summary>
                                    <ul>
                                        {% for evidence in obj.public_supporting_evidence %}
                                            <li class="m-3">
                                                <a class="py-2"href="{{ evidence.link }}">{{ evidence.title }}</a>
                                                <div class="description py-2">
                                                    <small>{{ evidence.description|linebreaks }}</small>
                                                </div>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </details>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            </article>
        {% endfor %}
    </section>

<p>Are you missing a green hosting provider in this list? Get verified yourself or ask your provider to get verified with us.</p>

{% endblock %}


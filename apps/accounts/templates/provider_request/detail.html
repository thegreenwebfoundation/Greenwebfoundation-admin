{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block content %}
<ul>
    <h1>
        Summary of your request: {{ object.name }}
    </h1>

    <li>Submitted at: {{ object.created }}</li>
    <li>Status: {{ object.status | upper }}</li>
    <li>Website: {{ object.website }}</li>
    <li>Description: {{ object.description }}</li>
    <li>Locations:
        <table>
            <tr>
                <th>Location</th>
                <th>Services provided</th>
                <th>IP ranges</th>
                <th>ASNs</th>
                <th>Supporting evidence</th>
            </tr>
            {% for loc in object.providerrequestlocation_set.all %}
            <tr>
                <td>{{ loc.city }}, {{ loc.country }}</td>
                <td>
                    {% for service in loc.services.values %}
                    {{ service.name }}<br>
                    {% endfor %}
                </td>
                <td>
                    {% for ip_range in loc.providerrequestiprange_set.all %}
                    {{ ip_range }}<br>
                    {% endfor %}
                </td>
                <td>
                    {% for asn in loc.providerrequestasn_set.all %}
                    {{ asn }}<br>
                    {% endfor %}
                </td>
                <td>
                    {% for doc in loc.providerrequestevidence_set.all %}
                    {{ doc }}<br>
                    {% endfor %}
                </td>
            </tr>
            {% endfor %}
        </table>
    </li>
    <li>
        Suppliers:
        <table>
            <tr>
                <th>Name</th>
                <th>Services used</th>
            </tr>
            {% for s in object.suppliers.all %}
            <tr>
                <td>{{ s.supplier }}</td>
                <td>
                    {% for service in s.services.values %}
                    {{ service.name }}<br>
                    {% endfor %}
                </td>
            </tr>
            {% endfor %}
        </table>
    </li>
</ul>
{% endblock %}